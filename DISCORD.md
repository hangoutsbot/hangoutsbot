# Create a Discord bot link to Hangouts

Discord does not need a separate bot account to be setup and registered for this process to work.   
You can use your login details to setup the bot as per the below instructions in Discord.

Hangouts bot will connect to Discord via a token and run directly as that bot account.  
Ensure you have the latest Hangoutsbot version from github that supports the Discord plugin.

# Creating the Discord bot 
Browse to the following link
(note: IE may appear to hang and show a rotating wait sign instead of the [New App].  If that occurs, try restarting the browser without logging in.  Alternative, use Chrome in incognito mode to force the login step.	https://discordapp.com/developers/applications/me#top
Login when prompted.  	 
Click on the + button to create a New App	 
	 
Set an app name, configure with picture text etc as you see fit.  No need to add a redirect.
Once done, click on [Create App]
	 
Application should now be setup correctly.
Now need to mark as being a Bot user.
Click on the [Create a Bot User] button on the right.
Make sure to take note of the CLIENT ID.  We will need this to associate the bot with the Discord server.
	 
Confirmation message will appear. 
Click on the [Yes, do it!] if you are sure this will be a bot!	 
Click on the Save [Changes] button at the bottom of the bot creation window.	 
Next we need to associate/authorise the bot with the Discord server we want it to be associated with.	
https://discordapp.com/oauth2/authorize?client_id=CLIENT_ID&scope=bot&permissions=0

Select the Discord server this BOT will be authorised to access; click on [Authorize] once done.	 
Success!

	 
Configure the bot account with a picture/change nickname etc.

As you are logged in as the bot, it will appear online and BOT on the end of the name.  	 
Once completed, you should now see various BOT details, including **Client ID**, Client Secret, Username, and **Token**.

Make sure to copy the token from **[Token: click to reveal]** as that will be needed for the hangoutsbot connection to Discord using this bot.

# Configure Hangouts bot
	
Connect to your hangoutbots with a conversation already open and responding in hangouts.

# Discord plugin and dependencies should already be installed.

Command to use:  /bot config set discord_token "<Token code noted above from App Bot User in Discord?"

Make sure to use the " " around the code.	 
All going well, the hangouts bot should respond with:	Config_discord_token: <token entered above>
Restart your hangoutsbot.
* Note: 
	* I had to go into the config.json for the hangoutbot and paste the token in properly.
	* There was an error report re frozen route issue.  Fix is to edit sinks/__init__.py, ~ line 146 and Move 	RequestHander.addroutes(app.router) to between app=web.Application() and handler - app.make_handler() 
	* Numerous alerts generated by Telesync.  Move/delete the telesync plugin to clean these up.
	
In discord, you should now see your bot is showing as online (green dot) in bottom right of picture.  	 
Create/join the channel you want to link to Hangouts.  Make sure the bot has permissions as well.	
We need to get the Discord channel identifier.
Type the following command: /whereami
Take note of the CHANNEL ID produced. This will need to be used to complete the connection.	Example CHANNEL ID: 123456789123456789
In the hangout, type the following command to complete the HO/Discord sync: /bot dsync <CHANNEL ID>	
Example: /bot sync 123456789123456789
If successful, will return: Synced Discord Bot Interface to <CHANNEL ID>

Test to make sure text, links and images are being transferred correctly.	
To sync other channels, simply repeat the /whereami and /bot dsync commands for each new channel/HO you want to sync.	

